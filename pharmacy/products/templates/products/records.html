{% extends 'products/base.html' %}
{% load static %}

{% block title %}Stock Records{% endblock %}

{% block content %}
<div class="records-container">
    <h2>ðŸ“¦ Current Stock Records</h2>

    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <p class="message {{ message.tags }}">{{ message }}</p>
            {% endfor %}
        </div>
    {% endif %}

    {% if items %}
        <table class="records-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Drug Name</th>
                    <th>Category</th>
                    <th>Quantity</th>
                    <th>Buying Price (Ksh)</th>
                    <th>Selling Price (Ksh)</th>
                    <th>Expiry Date</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                    <tr class="{% if item.quantity < 10 %}low-stock{% endif %}">
                        <td>{{ forloop.counter }}</td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.category }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.buying_price }}</td>
                        <td>{{ item.selling_price }}</td>
                        <td>{{ item.expiry_date|date:"Y-m-d" }}</td>
                        <td>
                            {% if item.quantity == 0 %}
                                <span class="status out">Out of Stock</span>
                            {% elif item.quantity < 10 %}
                                <span class="status low">Low Stock</span>
                            {% else %}
                                <span class="status good">In Stock</span>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-records">No stock records available yet.</p>
    {% endif %}
</div>

<style>
.records-container {
    max-width: 900px;
    margin: 30px auto;
    background: #fff;
    padding: 20px 25px;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
}

.records-container h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #2a5d8f;
}

.records-table {
    width: 100%;
    border-collapse: collapse;
}

.records-table th,
.records-table td {
    border: 1px solid #ddd;
    padding: 10px 12px;
    text-align: center;
}

.records-table th {
    background-color: #f3f6fa;
    color: #2a5d8f;
    font-weight: bold;
}

.records-table tr:nth-child(even) {
    background-color: #f9f9f9;
}

.records-table tr.low-stock {
    background-color: #fff3f3;
}

.status {
    font-weight: bold;
    padding: 5px 10px;
    border-radius: 6px;
}

.status.good {
    color: #155724;
    background-color: #d4edda;
}

.status.low {
    color: #856404;
    background-color: #fff3cd;
}

.status.out {
    color: #721c24;
    background-color: #f8d7da;
}

.no-records {
    text-align: center;
    color: #666;
    margin-top: 20px;
}
</style>
{% endblock %}
